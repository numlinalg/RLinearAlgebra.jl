<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Consistent Linear Systems · RLinearAlgebra</title><meta name="title" content="Consistent Linear Systems · RLinearAlgebra"/><meta property="og:title" content="Consistent Linear Systems · RLinearAlgebra"/><meta property="twitter:title" content="Consistent Linear Systems · RLinearAlgebra"/><meta name="description" content="Documentation for RLinearAlgebra."/><meta property="og:description" content="Documentation for RLinearAlgebra."/><meta property="twitter:description" content="Documentation for RLinearAlgebra."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">RLinearAlgebra</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><input class="collapse-toggle" id="menuitem-2" type="checkbox" checked/><label class="tocitem" for="menuitem-2"><span class="docs-label">Manual</span><i class="docs-chevron"></i></label><ul class="collapsed"><li class="is-active"><a class="tocitem" href>Consistent Linear Systems</a><ul class="internal"><li><a class="tocitem" href="#Solving-a-linear-system-using-defaults"><span>Solving a linear system using defaults</span></a></li><li><a class="tocitem" href="#Components-of-a-randomized-linear-system-solver"><span>Components of a randomized linear system solver</span></a></li><li><a class="tocitem" href="#Example:-A-randomized-Kaczmarz-method"><span>Example: A randomized Kaczmarz method</span></a></li></ul></li><li><a class="tocitem" href="../tracking_overview/">Tracking</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3" type="checkbox"/><label class="tocitem" for="menuitem-3"><span class="docs-label">API Reference</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../api/linear_rsolve/">Randomized Linear Solvers</a></li><li><a class="tocitem" href="../../api/linear_samplers/">Linear Samplers</a></li><li><input class="collapse-toggle" id="menuitem-3-3" type="checkbox"/><label class="tocitem" for="menuitem-3-3"><span class="docs-label">Linear Subsolvers</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../api/linear_solver_routines/">Main Solvers</a></li><li><a class="tocitem" href="../../api/linear_solver_helpers/">Solver Helpers</a></li></ul></li><li><a class="tocitem" href="../../api/linear_solver_logs/">Linear Solver Logs</a></li><li><a class="tocitem" href="../../api/linear_solver_stops/">Linear Solver Stop Criteria</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Manual</a></li><li class="is-active"><a href>Consistent Linear Systems</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Consistent Linear Systems</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/numlinalg/RLinearAlgebra.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/numlinalg/RLinearAlgebra.jl/blob/master/docs/src/man/cls_overview.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Solving-Consistent-Linear-Systems"><a class="docs-heading-anchor" href="#Solving-Consistent-Linear-Systems">Solving Consistent Linear Systems</a><a id="Solving-Consistent-Linear-Systems-1"></a><a class="docs-heading-anchor-permalink" href="#Solving-Consistent-Linear-Systems" title="Permalink"></a></h1><p>A system linear of equations–-that is, a linear system–-is specified by a   coefficient matrix, <span>$A$</span>, and a constant vector <span>$b.$</span> A linear system is   consistent if there exists at least one vector <span>$x^*$</span> such that <span>$Ax^* = b$</span>. The   set of vectors, <span>$x^*$</span>, satisfying <span>$Ax^* = b$</span> are called solutions. A linear   system can be solved by using a <a href="../../api/linear_rsolve/#Randomized-Linear-Solver">Randomized Linear Solver</a>, which   leverages randomization to (hopefully) reduce the amount of computation or   resources needed to (approximately) find a solution to a linear system.</p><p>Randomized linear solvers come in a number of varieties and under a number of   names. In this library, a broad set of randomized linear solvers are   encapsulated using a  flexible yet uniform interface that is described below.   Once a randomized linear solver is specified, it is passed to a solver   function (i.e., <a href="../../api/linear_rsolve/#RLinearAlgebra.rsolve"><code>rsolve</code></a> or <a href="../../api/linear_rsolve/#RLinearAlgebra.rsolve!"><code>rsolve!</code></a>) along with the linear system, which   then produces an approximate solution to the linear system.</p><p>We will begin by specifying the quickest way of solving a linear system by using   the default linear solver. We will then show how to pass a user supplied   randomized linear solver to <a href="../../api/linear_rsolve/#RLinearAlgebra.rsolve"><code>rsolve</code></a>. Then, we will introduce the   general interface for specifying randomized linear solvers.</p><h2 id="Solving-a-linear-system-using-defaults"><a class="docs-heading-anchor" href="#Solving-a-linear-system-using-defaults">Solving a linear system using defaults</a><a id="Solving-a-linear-system-using-defaults-1"></a><a class="docs-heading-anchor-permalink" href="#Solving-a-linear-system-using-defaults" title="Permalink"></a></h2><p>Given a consistent linear system whose coefficient matrix is specified in <code>A</code>    and whose constant vector is provided in <code>b</code>, an approximate solution to the    system is returned by calling <code>rsolve(A,b)</code>. For example, <code>sol</code> is an    approximate solution to the generated system in the following script.</p><pre><code class="language-julia hljs">using RLinearAlgebra

# Generate a system
A = rand(20, 5);
x = rand(5);
b = A * x;

# Solve the system
sol = rsolve(A, b);</code></pre><p>The default solver is hidden in the preceding example, but we can explicitly   construct the default solver and pass it to <a href="../../api/linear_rsolve/#RLinearAlgebra.rsolve"><code>rsolve</code></a> as shown in the   following script.</p><pre><code class="language-julia hljs">using RLinearAlgebra

# Generate a system
A = rand(20, 5);
x = rand(5);
b = A * x;

# Specify the default solver and stop it after 200 iterations
solver = RLSSolver(200);

# Solve the system
sol = rsolve(solver, A, b);</code></pre><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>Owing  to randomness, the two scripts will produce two different solutions. This is expected as randomized linear solvers do not have determinism. You can attempt to enforce this by specifying a seed if you wish to check that the solutions produced are identical.</p></div></div><p>In the above example, the randomized linear solver, <code>solver</code>, is given by the   constructor <a href="../../api/linear_rsolve/#RLinearAlgebra.RLSSolver"><code>RLSSolver</code></a> with an argument <code>200</code>, which specifies the   total number of iterations allowed before the algorithm must stop. While we   have explicitly constructed the solver and passed it to <a href="../../api/linear_rsolve/#RLinearAlgebra.rsolve"><code>rsolve</code></a>, we   still have hidden many of the components of the randomized solver. In the   next section, we discuss these components.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>For an in-place solver or to provide an initial iterate, see the documentation for <a href="../../api/linear_rsolve/#RLinearAlgebra.rsolve!"><code>rsolve!</code></a>.</p></div></div><h2 id="Components-of-a-randomized-linear-system-solver"><a class="docs-heading-anchor" href="#Components-of-a-randomized-linear-system-solver">Components of a randomized linear system solver</a><a id="Components-of-a-randomized-linear-system-solver-1"></a><a class="docs-heading-anchor-permalink" href="#Components-of-a-randomized-linear-system-solver" title="Permalink"></a></h2><p>A <a href="../../api/linear_rsolve/#Randomized-Linear-Solver">Randomized Linear Solver</a> specifies the algorithm that is used to find   an approximate solution to a linear system. In this library, a randomized   linear solver is encapsulated by four general and flexible components.</p><ul><li>A <strong>sampler</strong> (i.e., sketch, selection) is a way of extracting row or column space information from a given linear system.</li><li>A <strong>routine</strong> for generating a solution or updating an iterate given the information generated by the sampler.</li><li>A <strong>logger</strong> for recording essential information about the behavior of the randomized linear solver.</li><li>A <strong>stopping condition</strong> for determining when to terminate the linear solver (e.g., stopping at one iteration for a sketch-then-solve method).</li></ul><p>These four components are the fields of an <a href="../../api/linear_rsolve/#RLinearAlgebra.RLSSolver"><code>RLSSolver</code></a> struct.   Specifically, these fields are</p><ul><li><code>sampler</code> which must be a subtype of <a href="../../api/linear_samplers/#RLinearAlgebra.LinSysSampler"><code>LinSysSampler</code></a>. Subtypes of <a href="../../api/linear_samplers/#RLinearAlgebra.LinSysSampler"><code>LinSysSampler</code></a> specify the type of sampling/sketching/selection method being deployed. See <a href="../../api/linear_samplers/#Linear-Samplers">Linear Samplers</a> for a list of available samplers.</li><li><code>routine</code> which must be a subtype of <a href="../../api/linear_solver_routines/#RLinearAlgebra.LinSysSolveRoutine"><code>LinSysSolveRoutine</code></a>. Subtypes of <a href="../../api/linear_solver_routines/#RLinearAlgebra.LinSysSolveRoutine"><code>LinSysSolveRoutine</code></a>specify the method for solving the system that results from applying the sampling method to the original linear system. See <a href="../../api/linear_solver_routines/#Linear-Subsolvers">Linear Subsolvers</a> for a list of available routines.</li><li><code>log</code> which must be a subtype of <a href="../../api/linear_solver_logs/#RLinearAlgebra.LinSysSolverLog"><code>LinSysSolverLog</code></a>. Subtypes of <a href="../../api/linear_solver_logs/#RLinearAlgebra.LinSysSolverLog"><code>LinSysSolverLog</code></a> provides a struct that specifies what information is stored during execution of the algorithm. See <a href="../../api/linear_solver_logs/#Linear-Solver-Logs">Linear Solver Logs</a> for a list of available logs.</li><li><code>stop</code> which must be a subtype of <a href="../../api/linear_solver_stops/#RLinearAlgebra.LinSysStopCriterion"><code>LinSysStopCriterion</code></a>. Subtypes of <a href="../../api/linear_solver_stops/#RLinearAlgebra.LinSysStopCriterion"><code>LinSysStopCriterion</code></a> determine when the algorithm should stop, and often makes use of <code>log</code>. See <a href="../../api/linear_solver_stops/#Linear-Solver-Stop-Criteria">Linear Solver Stop Criteria</a> for a list of available stopping criteria.</li></ul><h2 id="Example:-A-randomized-Kaczmarz-method"><a class="docs-heading-anchor" href="#Example:-A-randomized-Kaczmarz-method">Example: A randomized Kaczmarz method</a><a id="Example:-A-randomized-Kaczmarz-method-1"></a><a class="docs-heading-anchor-permalink" href="#Example:-A-randomized-Kaczmarz-method" title="Permalink"></a></h2><p>Suppose we have a consistent linear system with coefficient matrix <span>$A$</span> and   constant vector <span>$b$</span>.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>The system can be overdetermined, square or underdetermined. The method will work regardless.</p></div></div><p>To solve this system, we will use a randomized linear solver which</p><ol><li>Randomly cycles through the equations of the linear system. That is, it will  randomly permute the equations of the system, cycle through this  permutation, generate another random permutation of the equations of the system, and repeat this process until a stopping condition is reached.</li><li>Generates a sequence of iterates by projecting onto the hyperplane specified  by the equation generated by the random cycling.</li><li>Records the (Euclidean) residual norms using the entire system at each  iteration. For a random algorithm, it makes very little sense to compute the  residual norm at each iteration or even at any iteration as this requires  accessing the entire original system, which is likely inefficient for  realistic problems.</li><li>The solver stops once the system&#39;s equations have been visited ten times  each.</li></ol><p>Each of these four components is addressed by the choice of <code>sampler</code>,   <code>routine</code>, <code>log</code>, and <code>stop</code> condition. In sum, these four choices will   be used to specify a <code>solver</code>.</p><ol><li>The <code>sampler</code> that implements the random permutation cycling is implemented  as <a href="../../api/linear_samplers/#RLinearAlgebra.LinSysVecRowRandCyclic"><code>LinSysVecRowRandCyclic</code></a>.</li><li>The <code>routine</code> that implements the projection onto the hyperplane is  implemented as <a href="../../api/linear_solver_routines/#RLinearAlgebra.LinSysVecRowProjStd"><code>LinSysVecRowProjStd</code></a>.</li><li>The <code>log</code> that implements the residual tracking is implemented as    <a href="../../api/linear_solver_logs/#RLinearAlgebra.LSLogFull"><code>LSLogFull</code></a>.</li><li>The <code>stop</code> condition that implements the iteration requirement is  implemented as <a href="../../api/linear_solver_stops/#RLinearAlgebra.LSStopMaxIterations"><code>LSStopMaxIterations</code></a>. We will pass the iteration at  which we want the algorithm to stop as an argument.</li></ol><p>This example solver can be implemented and used as follows.</p><pre><code class="language-julia hljs">using RLinearAlgebra

# Generate a system
A = rand(20, 5);
x = rand(5);
b = A * x;

# Specify solver
solver = RLSSolver(
    LinSysVecRowRandCyclic(),   # Random Cyclic Sampling
    LinSysVecRowProjStd(),      # Hyperplane projection
    LSLogFull(),                # Full Logger: maintains residual history
    LSStopMaxIterations(200),   # Maximum iterations stopping criterion
    nothing                     # System solution (not solved yet)
);

# Solve the system
sol = rsolve(solver, A, b)</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../">« Home</a><a class="docs-footer-nextpage" href="../tracking_overview/">Tracking »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.5.0 on <span class="colophon-date" title="Thursday 8 August 2024 16:11">Thursday 8 August 2024</span>. Using Julia version 1.6.7.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
